<h2>Harvest Report</h2>
<p>This page is a <i>mockup</i> of a simplified harvest report.</p>

<div v-cloak id="vueReport">
    
    <label for="title">Title: </label>
    <input id="title" type="text" v-model="reportTitle">
    <br>
    <br>

    <label for="start-date">Start: </label>
    <input type="date" id="start-date" min="2014-01-01" :max="reportEndDate" v-model="reportStartDate">
    <label for="end-date">End: </label>
    <input type="date" id="end-date" :min="reportStartDate" max="2022-01-01" v-model="reportEndDate">
    <br>
    <br>

    <label for="crop">Crop: </label>
    <select id="crop" v-model="reportCrop">
        <option v-for="crop in crops">{{ crop }}</option>
    </select>

    <label for="field">Field: </label>
    <select id="field">
        <option v-for="area in areas">{{ area }}</option>
    </select>
    <br>
    <br>

    <button @click="changeState('generated')">Generate Report</button>
    
    
    <div v-if="reportState==='generated'">
        <hr>
        
        <h2>{{ reportTitle ? reportTitle : "Mock Harvest Report" }}</h2>
        <p>Details:</p>
        <ul>
            <li><strong>Farm:</strong>Sample Farm</li>
            <li><strong>User:</strong>manager1</li>
            <li><strong>Language:</strong>English</li>
            <br>
            <li><strong>Start:</strong>{{ reportStartDate }}</li>
            <li><strong>End:</strong>{{ reportEndDate }}</li>
            <li><strong>Crop:</strong>{{ reportCrop }}</li>
        </ul>

        <p v-if="harvestLog.length === 0">There is no harvest logs to display.</p>
        <div v-if="harvestLog.length !== 0">
            <table border="1">
                <tr>
                    <th>Row</th>
                    <th>Date</th>
                    <th>Area</th>
                    <th>Crop</th>
                    <th>Yield</th>
                    <th>Units</th>
                    <th>Delete</th>
                </tr>
                <tr v-for="(log, index) in harvestLog">
                    <td>{{ index+1 }}</td>
                    <td>{{ log.date }}</td>
                    <td>{{ log.area }}</td>
                    <td>{{ log.crop }}</td>
                    <td>{{ log.yield }}</td>
                    <td>{{ log.units }}</td>
                    <td><button type="button" @click="deleteButton">Delete</button></td>
                </tr>
                
            </table>
        </div>
    </div>
</div>

<script>
    var vueReportVar = new Vue ({
        el: "#vueReport",
        data: {
            reportTitle: "My Sample Report",
            reportStartDate: "2020-05-05",
            reportEndDate: "2020-05-15",
            reportCrop: "",
            crops: ["Brocoli" ,"Kale", "Peas"],
            areas: ["All", "Chuau-1", "SQ7"],
            harvestLog: [],
            reportState: "notGenerated"
        },
        methods: {
            generateReport: function(){
                if (this.harvestLog.length == 0){
                    this.harvestLog.push({date: "2018-05-01", area: "Orion-3", crop: "Kale", yield: 12, units: "Bunches"});
                }
                else if (this.harvestLog.length == 1){
                    this.harvestLog.push({date: "2018-05-05", area: "SQ7", crop: "Kale", yield: 7, units: "Bunches"});
                }
                else if (this.harvestLog.length == 2){
                    this.harvestLog.push({date: "2020-05-05", area: "Chuau-1", crop: "Kale", yield: 10, units: "Bunches"});
                }
            },

            deleteButton: function(logIndex){
                this.harvestLog.splice(logIndex, 1)
            },
            
            changeState: function(newState){
                this.reportState = newState;
            },
        }
    });
    Vue.config.devtools = true;
</script>

 <!-- {date: "2018-05-02", area: "Chuau-1", crop: "Kale", yield: 10, units: "Bunches"}, -->
<!-- {date: "2018-05-05", area: "SQ7", crop: "Kale", yield: 7, units: "Bunches"} -->