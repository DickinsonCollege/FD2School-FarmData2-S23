<html>
  <div id="vue-harv" v-cloak>  
    <h1> Harvest Report </h1>
        <p> This page is a <i>mockup</i> of a simplified harvest report.</p>
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" v-model="rptTitle"/> <br> <br>
       
        <form>
            <label>
              Start:
              <input type="date" name="start" v-model="rptStart" min="2014-01-01" v-bind:max="rptEnd" />
            </label> 
            <label>
                End:
                <input type="date" name="end" v-model="rptEnd" v-bind:min="rptStart" max="2022-01-01" />
              </label>
        </form><br>
          

        <label for="crop">Crop:</label>
        <select id="crop" name="crop" v-model="rptCrop">
            <option v-for="crop in crops">{{crop}}</option>  
        </select>
        <label for="field">Field:</label>
        <select id="field" name="field">
            <option v-for = "area in areas">{{area}}</option> 
        </select>
        <br> <br>
          
        <button v-if="state === 'hidden'" class="btn btn-primary" @click='genReport'>Generate Report</button>
        <button v-else class="btn btn-secondary" @click="changeState('hidden')">Generate Another Report</button>
    <hr> 
        <div v-if="state === 'reveal'">
            <h2 v-cloak> {{ rptTitle ? rptTitle: "Mock Harvest Report" }} </h2>
                <p> Details: </p>
                <ul>
                    <li><b>Farm</b>:{{ farm }}</li>
                    <li><b>User</b>:{{ user }}</li>
                    <li><b>Language</b>:{{ language }}</li><br>
                    <li><b>Start</b>:{{ rptStart }}</li>
                    <li><b>End</b>:{{ rptEnd }}</li>
                    <li><b>Crop</b>:{{ rptCrop }}</li>
                </ul>
        
            <table v-if="tables.length > 0" border="1">
                <tr>
                    <th>Row</th>
                    <th>Date</th>
                    <th>Area</th>
                    <th>Crop</th>
                    <th>Yield</th>
                    <th>Units</th>
                </tr>
                <tr v-for = "(data,index) in tables">
                    <td >{{index + 1}}</td>
                    <td >{{data.date}}</td>
                    <td >{{data.area}}</td>
                    <td >{{data.crop}}</td>
                    <td >{{data.yield}}</td>
                    <td >{{data.units}}</td>
                </tr>
            </table>
            <p v-else>There are no matching records!</p>
        </div>
  </div>      
  <script>
    var vueHarv = new Vue ({
        el: '#vue-harv',
        data: {
            farm: " ",
            user: " ",
            language: " ",
            state: 'hidden',
            rptTitle: null,
            rptStart: '2020-05-05',
            rptEnd: '2020-05-15',
            rptCrop: 'Kale',
            crops: [
                "Kale",
                "Broccoli",
                "Peas"
            ],
            areas: [
                "All",
                "Chuau-1",
                "SQ7"
            ],
            tables: [
                
            ],
        },
        methods: {
            genReport: function() {
                if(this.state === 'hidden'){
                    this.state = 'reveal'
                }
                else{
                    this.tables.push({date:"2020-05-05", area:"Chuau-1", crop:"Kale", yield:10, units:"Bunches"});
                }
            },
            changeState: function(newState){
                this.state = newState;
    
            },
        }
    });
    Vue.config.devtools = true; 
</script>
</html>
